# 프로세스
* 개념 : 
    * 메모리 상에서 실행중인 프로그램   
    * 프로세스마다 최소 하나의 스레드를 보유하고 있는다.  
* 장점 : 
* 단점 : 

![process](https://user-images.githubusercontent.com/50267433/138288716-14f43f1d-9721-4a08-8699-8be267e313f4.png)

프로세스가 메모리에 올라갈 때 운영체제로부터 시스템 자원을 할당받는다.      
운영체제는 프로세스마다 각각 독립된 메모리 영역을, Code/Data/Stack/Heap의 형식으로 할당해 준다.        
각각 **독립된 메모리 영역**을 할당해 주기 때문에 프로세스는 다른 프로세스의 변수나 자료에 접근할 수 없다.       

# 스레드 
* 개념 : 
    * 프로세스 안에서 실행되는 흐름 단위
    * 프로세스의 stack 메모리를 할당 받아서 여러 스레드간 공유하면서 사용한다.     
* 장점 : 자원을 공유하기에 
* 단점 : 공유 자원으로 인한 문제 해결을 위해 '동기화'에 신경써야 한다.     

![thread](https://user-images.githubusercontent.com/50267433/138288756-afa6d387-dfc5-4d86-b902-19c46accf027.png)

프로세스가 할당받은 메모리 영역 내에서 Stack 형식으로 할당된 메모리 영역은 따로 할당받고,      
나머지 Code/Data/Heap 형식으로 할당된 메모리 영역을 공유한다.     
따라서 각각의 스레드는 별도의 스택을 가지고 있지만 힙 메모리는 서로 읽고 쓸 수 있게 된다.     
      
그럼 스택은 왜 따로 놀아?         
스레드는 자기 자신을 위한 Stack을 생성한다.     
함수 호출시 전달되는 인자, 되돌아갈 주소값, 내부 변수 등을 저장하기 위함이다.      
스택은 비워지는 특성이 있는데, A라는 곳에서 비우고 B라는 곳에서 참조하면 이는 알맞지 않는다.     
  
스레드는 Code/Data/Heap 메모리 영역의 내용을 공유하기 때문에    
어떤 스레드 하나에서 오류가 발생한다면 같은 프로세스 내의 다른 스레드 모두가 강제로 종료된다.  
 



# 프로세스 vs 스레드   
> 프로그램, 프로세스, 스레드에 대한 기본 개념에 대한 이해 확인 위함   


프로세스와 스레드는 개념의 범위부터 다르다. 스레드는 프로세스 안에 포함되어 있기 때문이다.

운영체제가 프로세스에게 Code/Data/Stack/Heap 메모리 영역을 할당해 주고 최소 작업 단위로 삼는 반면, 스레드는 프로세스 내에서 Stack 메모리 영역을 제외한 다른 메모리 영역을 같은 프로세스 내 다른 스레드와 공유한다.

프로세스는 다른 프로세스와 정보를 공유하려면 IPC를 사용하는 등의 번거로운 과정을 거쳐야 하지만, 스레드는 기본 구조 자체가 메모리를 공유하는 구조이기 때문에 다른 스레드와 정보 공유가 쉽다. 때문에 멀티태스킹보다 멀티스레드가 자원을 아낄 수 있게 된다. 다만 스레드의 스케줄링은 운영체제가 처리하지 않기 때문에 프로그래머가 직접 동기화 문제에 대응할 수 있어야 한다.

  
# 멀티 프로세스
* 개념 : 프로세스를 여러 개 실행하는 것
* 장점 : 
* 단점 : 

# 멀티 스레드
* 개념 : 
* 장점 : 
* 단점 : 

# 멀티 프로세스 VS 멀티 스레드
* 상황마다 다르겠지만, 대부분 멀티 스레드를 이용 
* 프로세스를 생성하여 자원을 할당하는 시스템 콜이 감소함으로써 자원의 효율적 관리가 가능함   
* 프로세스 간의 통신(IPC)보다 스레드 간의 통신 비용이 적어 작업들 간 부담이 감소함          
* 대신, 멀티 스레드를 사용할 때는 공유 자원으로 인한 문제 해결을 위해 '동기화'에 신경써야 한다.   

```
## 멀티 프로세스간 통신 IPC 
IPC : 프로세스 간의 통신이 가능하도록 해주는 것   

* 익명 PIPE : 
    * 하나의 프로세스는 데이터를 쓰기만 하고, 다른 하나는 데이터를 읽기만 할 수 있다.
    * 한쪽 방향으로만 통신이 가능한 반이중 통신  
    * 전이중 통신을 위해서는 익명 파이프처럼 2개를 만들어야 가능   
  
* Named PIPE(FIFO) :  
    * 통신할 프로세스를 명확히 알 수 있는 경우에 사용
    *  Named 파이프 역시 읽기/쓰기 동시에 불가능함.
    *  전이중 통신을 위해서는 익명 파이프처럼 2개를 만들어야 가능

* Message Queue :
    * 파이프처럼 데이터의 흐름이 아니라 메모리 공간
    * 사용할 데이터에 번호를 붙이면서 여러 프로세스가 동시에 데이터를 쉽게 다룰 수 있다.
 
```

# 멀티 스레드 사용시 동기화 관리 
* 뮤텍스, 세마포어 얘기  

# 뮤텍스
# 세마포어
# 뮤텍스 vs 세마포어 
* 어떤 것 사용할 것이냐? -> 상황마다 다름 :
    * 뮤텍스 사용시 시간이 지연될 것 같은데 어떻게 해결 -> ?
    * 세마포어 사용시 리소스에 여러 스레드가 접근 가능한데 어떻게 해결 -> Version 관리하는 방식을 추가로 적용 

# Race Condition 
* https://github.com/gyoogle/tech-interview-for-developer/blob/master/Computer%20Science/Operating%20System/Race%20Condition.md

# Race Condition 해결 방법

# 데드락 
# 데드락 원칙 4가지 
# 데드락 해결 4가지 
* 4가지 외에도, 세마포어의 스레드 갯수를 늘리는 방식도 있다고 함 

루트 댓글별로 그룹을 나눠주는게 핵심입니다.(게시글 내 댓글들을 하나의 그룹으로 묶어도 됩니다.) 
댓글 테이블에 그룹넘버, 그룹내 순서 칼럼을 추가하시고 루트 댓글이 생성될때 pk와 그룹넘버가 동일하게 생성되고 그룹 순서는 1이 되도록 만들고  
그 루트 댓글에 달리는 대댓글들은 모두 루트 댓글의 그룹넘버와 같은 그룹넘버를 갖도록 합니다. 
그러면 이제 다른 루트그룹에 대해서는 아무 신경 안쓰셔도 되거든요. 이제부터 그룹내 순서를 잘 만들어주는게 핵심입니다. 
한개의 루트그룹 기준으로 생각할때 대댓글의 그룹순서는 
대댓글을 달고자 하는 대상인 부모댓글(루트가 아닌 경우도 포함)보다 그룹 순서가 크면서(밑에 있으면서) 깊이가 작거나 같은 최초의 댓글의 그룹순서가 되며(없을땐 그룹내 맨 마지막이 됨.) 
그룹 순서가 곂치는걸 수정하기 위해서 그 댓글부터 그 밑에 댓글들의 그룹순서를 1씩 올려주면 됩니다. 이렇게 해주면 
ORDER BY group_id ASC, group_order ASC;
로 정렬이 깔끔하게 됩니다.
삭제같은 경우는 is_hidden 칼럼도 추가해서 대댓글이 있는 댓글을 지웠을때 숨김처리만 하고, 재귀를 이용해서 연쇄된 숨김댓글 고리의 마지막 리프노드 삭제시 그 숨김 고리를 전부 삭제하도록 만들수도 있습니다.


1. 루트 댓글을 기준으로 그룹을 만든다.     
2. 그룹 넘버, 그룹 순서 컬럼을 가진다.   
3. 루트 댓글이 생성되면, PK == 그룹넘버 
4. 루트 댓글에 달리는 대댓글들은 모두 루트와 같은 그룹 
5. 그룹내 순서를 잘 짜야한다.  
6. 순서는, 부모댓글보다 그룹 순서가 크면서 깊이가 작거나 같은 최초의 댓글의 그룹 순서가 된다.(없으면 맨 마지막)  
7. 그룹 순서가 겹치는 것을 방지하기 위해서 그 댓글부터 그 밑에 댓글들의 그룹 선스를 1씩 올려준다.  
 
삭제같은 경우는 is_hidden 칼럼도 추가해서 대댓글이 있는 댓글을 지웠을때 숨김처리만 하고,   
재귀를 이용해서 연쇄된 숨김댓글 고리의 마지막 리프노드 삭제시 그 숨김 고리를 전부 삭제하도록 만들수도 있습니다.  


* 루트 게시판인 1/2/3이 있다고 가정 
* 1게시판의 답글 생김(순서는 2)
* 1게시판의 답글 생김(순서는 3)이 됨 


`UPDATE board SET grpord = grpord + 1 where grpord >1 and groupno = 2;`.   
라고 퀴리를 작성해주면 groupno가 같으면서    
grpord가 새로운 답글이 위치할 grpord보다 큰 경우의 grpord를 전부 +1해준다.    
depth는 원글보다 +1 해주면 된다.  


